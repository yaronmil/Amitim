{"version":3,"sources":["flexbox/api/show-hide.ts"],"names":[],"mappings":"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","file":"show-hide.js","sourcesContent":["import {Directive, ElementRef, Input, OnChanges, OnInit, Renderer, SimpleChanges,} from '@angular/core';\r\n\r\nimport {delay, isDefined} from '../../utils/global';\r\nimport {MediaQueryActivation} from '../media-query/media-query-activation';\r\nimport {MediaQueryAdapter} from '../media-query/media-query-adapter';\r\nimport {MediaQueryChanges, OnMediaQueryChanges} from '../media-query/media-query-changes';\r\n\r\nimport {BaseStyleDirective} from './abstract';\r\n\r\n\r\nconst FALSY = ['false', '0', false, 0];\r\n\r\n/**\r\n * 'show' Layout API directive\r\n *\r\n */\r\n@Directive({selector: '[fx-show]'})\r\nexport class ShowDirective extends BaseStyleDirective implements OnInit, OnChanges,\r\n                                                                 OnMediaQueryChanges {\r\n  /**\r\n   * Original dom Elements CSS display style\r\n   */\r\n  private _display = 'flex';\r\n\r\n  /**\r\n   * MediaQuery Activation Tracker\r\n   */\r\n  private _mqActivation: MediaQueryActivation;\r\n\r\n  /**\r\n   * Default layout property with default visible === true\r\n   */\r\n  @Input('fx-show') show = true;\r\n\r\n  // *******************************************************\r\n  // Optional input variations to support mediaQuery triggers\r\n  // *******************************************************\r\n\r\n  @Input('fx-show.xs') showXs;\r\n  @Input('fx-show.gt-xs') showGtXs;\r\n  @Input('fx-show.sm') showSm;\r\n  @Input('fx-show.gt-sm') showGtSm;\r\n  @Input('fx-show.md') showMd;\r\n  @Input('fx-show.gt-md') showGtMd;\r\n  @Input('fx-show.lg') showLg;\r\n  @Input('fx-show.gt-lg') showGtLg;\r\n  @Input('fx-show.xl') showXl;\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor(\r\n      private _mqa: MediaQueryAdapter, protected elRef: ElementRef, protected renderer: Renderer) {\r\n    super(elRef, renderer);\r\n  }\r\n\r\n  // *********************************************\r\n  // Lifecycle Methods\r\n  // *********************************************\r\n\r\n  /**\r\n   * On changes to any @Input properties...\r\n   * Default to use the non-responsive Input value ('fx-show')\r\n   * Then conditionally override with the mq-activated Input's current value\r\n   */\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    let activated = this._mqActivation;\r\n    let activationChange = activated && isDefined(changes[activated.activatedInputKey]);\r\n    if (isDefined(changes['show']) || activationChange) {\r\n      this._updateWithValue();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * After the initial onChanges, build an mqActivation object that bridges\r\n   * mql change events to onMediaQueryChange handlers\r\n   */\r\n  ngOnInit() {\r\n    this._mqActivation = this._mqa.attach(this, 'show', 'true');\r\n    this._updateWithValue();\r\n  }\r\n\r\n  /**\r\n   *  Special mql callback used by MediaQueryActivation when a mql event occurs\r\n   */\r\n  onMediaQueryChanges(changes: MediaQueryChanges) {\r\n    delay(() => {\r\n      this._updateWithValue(changes.current.value);\r\n    });\r\n  }\r\n\r\n  // *********************************************\r\n  // Protected methods\r\n  // *********************************************\r\n\r\n  /**\r\n   * Validate the visibility value and then update the host's inline display style\r\n   */\r\n  _updateWithValue(value?: string|number|boolean) {\r\n    value = value || this.show || true;\r\n    if (isDefined(this._mqActivation)) {\r\n      value = this._mqActivation.activatedInput;\r\n    }\r\n    value = this._validateValue(value);\r\n\r\n    // Update styles and announce to subscribers the *new* direction\r\n    this._updateStyle(this._buildCSS(value));\r\n  }\r\n\r\n\r\n  /**\r\n   * Build the CSS that should be assigned to the element instance\r\n   */\r\n  _buildCSS(isFalsy) {\r\n    return {'display': !isFalsy ? this._display : 'none'};\r\n  }\r\n\r\n  /**\r\n   * Validate the value to be not FALSY\r\n   */\r\n  _validateValue(value) {\r\n    return isDefined(FALSY.find(x => x === value));\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * 'show' Layout API directive\r\n *\r\n */\r\n@Directive({selector: '[fx-hide]'})\r\nexport class HideDirective extends BaseStyleDirective implements OnInit, OnChanges,\r\n                                                                 OnMediaQueryChanges {\r\n  /**\r\n   * Original dom Elements CSS display style\r\n   */\r\n  private _display = 'flex';\r\n\r\n  /**\r\n   * MediaQuery Activation Tracker\r\n   */\r\n  private _mqActivation: MediaQueryActivation;\r\n\r\n  /**\r\n   * Default layout property with default visible === true\r\n   */\r\n  @Input('fx-hide') hide = true;\r\n\r\n  // *******************************************************\r\n  // Optional input variations to support mediaQuery triggers\r\n  // *******************************************************\r\n\r\n  @Input('fx-hide.xs') hideXs;\r\n  @Input('fx-hide.gt-xs') hideGtXs;\r\n  @Input('fx-hide.sm') hideSm;\r\n  @Input('fx-hide.gt-sm') hideGtSm;\r\n  @Input('fx-hide.md') hideMd;\r\n  @Input('fx-hide.gt-md') hideGtMd;\r\n  @Input('fx-hide.lg') hideLg;\r\n  @Input('fx-hide.gt-lg') hideGtLg;\r\n  @Input('fx-hide.xl') hideXl;\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor(\r\n      private _mqa: MediaQueryAdapter, protected elRef: ElementRef, protected renderer: Renderer) {\r\n    super(elRef, renderer);\r\n  }\r\n\r\n  // *********************************************\r\n  // Lifecycle Methods\r\n  // *********************************************\r\n\r\n  /**\r\n   * On changes to any @Input properties...\r\n   * Default to use the non-responsive Input value ('fx-hide')\r\n   * Then conditionally override with the mq-activated Input's current value\r\n   */\r\n  ngOnChanges(changes?: SimpleChanges) {\r\n    let activated = this._mqActivation;\r\n    let activationChange = activated && isDefined(changes[activated.activatedInputKey]);\r\n\r\n    if (isDefined(changes['hide']) || activationChange) {\r\n      this._updateWithValue();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * After the initial onChanges, build an mqActivation object that bridges\r\n   * mql change events to onMediaQueryChange handlers\r\n   */\r\n  ngOnInit() {\r\n    this._mqActivation = this._mqa.attach(this, 'hide', 'true');\r\n    this._updateWithValue();\r\n  }\r\n\r\n  /**\r\n   *  Special mql callback used by MediaQueryActivation when a mql event occurs\r\n   */\r\n  onMediaQueryChanges(changes: MediaQueryChanges) {\r\n    delay(() => {\r\n      this._updateWithValue(changes.current.value);\r\n    });\r\n  }\r\n\r\n  // *********************************************\r\n  // Protected methods\r\n  // *********************************************\r\n\r\n  /**\r\n   * Validate the visibility value and then update the host's inline display style\r\n   */\r\n  _updateWithValue(value?: string|number|boolean) {\r\n    let key = '';\r\n\r\n    value = value || this.hide || true;\r\n\r\n    if (isDefined(this._mqActivation)) {\r\n      value = this._mqActivation.activatedInput;\r\n      key = this._mqActivation.activatedInputKey;\r\n    }\r\n    value = this._validateValue(value);\r\n\r\n    // Update styles and announce to subscribers the *new* direction\r\n    this._updateStyle(this._buildCSS(value));\r\n  }\r\n\r\n\r\n  /**\r\n   * Build the CSS that should be assigned to the element instance\r\n   */\r\n  _buildCSS(value) {\r\n    return {'display': value ? 'none' : this._display};\r\n  }\r\n\r\n  /**\r\n   * Validate the value to be FALSY\r\n   */\r\n  _validateValue(value) {\r\n    // console.log(`HideDirective::_validateValue( ${value} )`);\r\n    return !isDefined(FALSY.find(x => x === value));\r\n  }\r\n}\r\n"]}